import{S as j,i as F,s as G,k as y,w as V,a as L,l as b,m as T,x as q,h,c as P,n as p,a8 as D,b as k,H as E,y as S,J as I,f as g,t as v,z as C,D as K,N as R,a9 as x,q as O,r as z,B as w,aa as H,e as J,g as A,d as N,O as $,ag as ee,u as te}from"./index-cc9d6004.js";import{u as se,e as oe}from"./auth-6dbf0ee1.js";import{I as le}from"./Icon-f906670f.js";import{s as ne}from"./session-33c98699.js";import{T as ie}from"./TodoContent-fbb15758.js";function re(r){let e,t,o;return{c(){e=y("div"),t=y("span"),o=O("Add a new todo now!"),this.h()},l(l){e=b(l,"DIV",{class:!0});var i=T(e);t=b(i,"SPAN",{class:!0});var a=T(t);o=z(a,"Add a new todo now!"),a.forEach(h),i.forEach(h),this.h()},h(){p(t,"class","bold svelte-10nlk8i"),p(e,"class","todo svelte-10nlk8i")},m(l,i){k(l,e,i),E(e,t),E(t,o)},p:w,d(l){l&&h(e)}}}function ae(r){let e,t,o;return{c(){e=y("input"),this.h()},l(l){e=b(l,"INPUT",{placeholder:!0,class:!0}),this.h()},h(){p(e,"placeholder","Let's do Together!"),p(e,"class","svelte-10nlk8i")},m(l,i){k(l,e,i),r[12](e),H(e,r[2]),t||(o=[I(e,"input",r[13]),I(e,"blur",r[6]),I(e,"keydown",r[7])],t=!0)},p(l,i){i&4&&e.value!==l[2]&&H(e,l[2])},d(l){l&&h(e),r[12](null),t=!1,K(o)}}}function ce(r){let e,t,o,l,i,a,s;o=new le({props:{icon:r[3],color:r[4],width:ue}});function c(n,f){return n[0]?ae:re}let u=c(r),d=u(r);return{c(){e=y("div"),t=y("div"),V(o.$$.fragment),l=L(),d.c(),this.h()},l(n){e=b(n,"DIV",{class:!0});var f=T(e);t=b(f,"DIV",{class:!0});var m=T(t);q(o.$$.fragment,m),m.forEach(h),l=P(f),d.l(f),f.forEach(h),this.h()},h(){p(t,"class","svelte-10nlk8i"),p(e,"class","flex svelte-10nlk8i"),D(e,"editing",r[0])},m(n,f){k(n,e,f),E(e,t),S(o,t,null),E(e,l),d.m(e,null),i=!0,a||(s=[I(e,"click",r[5]),I(e,"keydown",r[5])],a=!0)},p(n,[f]){const m={};f&8&&(m.icon=n[3]),f&16&&(m.color=n[4]),o.$set(m),u===(u=c(n))&&d?d.p(n,f):(d.d(1),d=u(n),d&&(d.c(),d.m(e,null))),(!i||f&1)&&D(e,"editing",n[0])},i(n){i||(g(o.$$.fragment,n),i=!0)},o(n){v(o.$$.fragment,n),i=!1},d(n){n&&h(e),C(o),d.d(),a=!1,K(s)}}}const ue=30;let fe="";const de="todo";function _e(r,e,t){let o,l,i,a;R(r,ne,_=>t(11,a=_));let{source:s=o}=e,{isTeam:c=!1}=e,{callback:u=_=>{}}=e,d,n=!1,f="";const m=()=>{t(0,n=!0),setTimeout(()=>d.focus(),1)},B=()=>{if(!n||(t(0,n=!1),f==""))return;const _={contentType:"todo",id:"",title:`${f}`,caption:"",status:"todo",type:"",date:new Date,color:fe};t(2,f=""),u(_),se({source:s,isTeam:c,content:_,type:de}).then(Z=>{_.id=Z.id})},W=_=>{_.key==="Enter"&&B()};function X(_){x[_?"unshift":"push"](()=>{d=_,t(1,d)})}function Y(){f=this.value,t(2,f)}return r.$$set=_=>{"source"in _&&t(8,s=_.source),"isTeam"in _&&t(9,c=_.isTeam),"callback"in _&&t(10,u=_.callback)},r.$$.update=()=>{var _;r.$$.dirty&2048&&(o=(_=a==null?void 0:a.user)==null?void 0:_.uid),r.$$.dirty&1&&t(3,i=n?"akar-icons:circle":"gridicons:add")},t(4,l="var(--primary);"),[n,d,f,i,l,m,B,W,s,c,u,a,X,Y]}class he extends j{constructor(e){super(),F(this,e,_e,ce,G,{source:8,isTeam:9,callback:10})}}function M(r,e,t){const o=r.slice();return o[10]=e[t],o}function Q(r){let e,t,o;return t=new he({props:{source:r[1],isTeam:r[2],callback:r[5]}}),{c(){e=y("div"),V(t.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var i=T(e);q(t.$$.fragment,i),i.forEach(h),this.h()},h(){p(e,"class","add svelte-1ygri2f"),D(e,"push",r[4])},m(l,i){k(l,e,i),S(t,e,null),o=!0},p(l,i){const a={};i&2&&(a.source=l[1]),i&4&&(a.isTeam=l[2]),t.$set(a),(!o||i&16)&&D(e,"push",l[4])},i(l){o||(g(t.$$.fragment,l),o=!0)},o(l){v(t.$$.fragment,l),o=!1},d(l){l&&h(e),C(t)}}}function me(r){let e,t=[],o=new Map,l,i=r[0];const a=s=>s[10].id;for(let s=0;s<i.length;s+=1){let c=M(r,i,s),u=a(c);o.set(u,t[s]=U(u,c))}return{c(){e=y("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var c=T(e);for(let u=0;u<t.length;u+=1)t[u].l(c);c.forEach(h),this.h()},h(){p(e,"class","svelte-1ygri2f"),D(e,"push",r[4])},m(s,c){k(s,e,c);for(let u=0;u<t.length;u+=1)t[u].m(e,null);l=!0},p(s,c){c&7&&(i=s[0],A(),t=$(t,c,a,1,s,i,o,e,ee,U,null,M),N()),(!l||c&16)&&D(e,"push",s[4])},i(s){if(!l){for(let c=0;c<i.length;c+=1)g(t[c]);l=!0}},o(s){for(let c=0;c<t.length;c+=1)v(t[c]);l=!1},d(s){s&&h(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function pe(r){let e,t;return{c(){e=y("p"),t=O("No todos yet!"),this.h()},l(o){e=b(o,"P",{class:!0});var l=T(e);t=z(l,"No todos yet!"),l.forEach(h),this.h()},h(){p(e,"class","svelte-1ygri2f")},m(o,l){k(o,e,l),E(e,t)},p:w,i:w,o:w,d(o){o&&h(e)}}}function ke(r){let e;return{c(){e=O(r[0])},l(t){e=z(t,r[0])},m(t,o){k(t,e,o)},p(t,o){o&1&&te(e,t[0])},i:w,o:w,d(t){t&&h(e)}}}function U(r,e){let t,o,l,i;return o=new ie({props:{todo:e[10],source:e[1],isTeam:e[2]}}),{key:r,first:null,c(){t=y("div"),V(o.$$.fragment),l=L(),this.h()},l(a){t=b(a,"DIV",{class:!0});var s=T(t);q(o.$$.fragment,s),l=P(s),s.forEach(h),this.h()},h(){p(t,"class","todo svelte-1ygri2f"),this.first=t},m(a,s){k(a,t,s),S(o,t,null),E(t,l),i=!0},p(a,s){e=a;const c={};s&1&&(c.todo=e[10]),s&2&&(c.source=e[1]),s&4&&(c.isTeam=e[2]),o.$set(c)},i(a){i||(g(o.$$.fragment,a),i=!0)},o(a){v(o.$$.fragment,a),i=!1},d(a){a&&h(t),C(o)}}}function ge(r){let e,t,o,l,i,a,s=!r[3]&&Q(r);const c=[ke,pe,me],u=[];function d(n,f){return f&1&&(t=null),t==null&&(t=typeof n[0]=="string"||!Array.isArray(n[0])),t?0:n[0].length==0?1:2}return o=d(r,-1),l=u[o]=c[o](r),{c(){s&&s.c(),e=L(),l.c(),i=J()},l(n){s&&s.l(n),e=P(n),l.l(n),i=J()},m(n,f){s&&s.m(n,f),k(n,e,f),u[o].m(n,f),k(n,i,f),a=!0},p(n,[f]){n[3]?s&&(A(),v(s,1,1,()=>{s=null}),N()):s?(s.p(n,f),f&8&&g(s,1)):(s=Q(n),s.c(),g(s,1),s.m(e.parentNode,e));let m=o;o=d(n,f),o===m?u[o].p(n,f):(A(),v(u[m],1,1,()=>{u[m]=null}),N(),l=u[o],l?l.p(n,f):(l=u[o]=c[o](n),l.c()),g(l,1),l.m(i.parentNode,i))},i(n){a||(g(s),g(l),a=!0)},o(n){v(s),v(l),a=!1},d(n){s&&s.d(n),n&&h(e),u[o].d(n),n&&h(i)}}}function ye(r,e,t){let{todos:o=[]}=e,{source:l}=e,{isTeam:i}=e,{locked:a=!1}=e,s=!1;const c=u=>{typeof o!="string"&&(t(0,o=[u,...o]),t(4,s=!0),setTimeout(()=>{t(4,s=!1)},1100))};return r.$$set=u=>{"todos"in u&&t(0,o=u.todos),"source"in u&&t(1,l=u.source),"isTeam"in u&&t(2,i=u.isTeam),"locked"in u&&t(3,a=u.locked)},[o,l,i,a,s,c]}class Ee extends j{constructor(e){super(),F(this,e,ye,ge,G,{todos:0,source:1,isTeam:2,locked:3})}}const Ie=async({source:r,dateRange:e={start:new Date(0),end:new Date},isTeam:t=!1,amount:o=50})=>{let l,i=[];try{l=await oe({type:"todo",source:r,amount:o,isTeam:t,queries:[{type:"date",compare:">=",value:e.start},{type:"date",compare:"<",value:e.end}]})}catch(a){return a}return l.forEach(a=>{var c,u,d;const s=a.data();i.push({contentType:"todo",id:(c=s.id)!=null?c:a.id,title:(u=s.title)==null?void 0:u.trim(),caption:(d=s.caption)==null?void 0:d.trim(),color:s.color==""?"var(--primary)":`#${s.color.substring(2)+s.color.substring(0,2)}`,date:s.date.toDate(),status:s.status,type:s.type})}),i};export{Ee as T,Ie as g};
