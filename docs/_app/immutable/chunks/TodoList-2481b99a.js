import{S as B,i as F,s as H,k as v,v as V,a as L,l as y,m as T,w as q,h as _,c as C,n as p,a0 as D,b as k,G as E,x as P,L as I,f as g,t as b,y as S,a1 as W,q as G,r as M,A as w,a2 as O,C as X,e as Q,g as A,d as N,a8 as Y,u as Z,a9 as R}from"./index-1ec07f8a.js";import{m as x,u as $,e as ee}from"./auth-dca8f8ba.js";import{I as te}from"./Icon-a73cbaaa.js";import{T as se}from"./TodoContent-d68a4148.js";function le(a){let e,t,l;return{c(){e=v("div"),t=v("span"),l=G("Add a new todo now!"),this.h()},l(o){e=y(o,"DIV",{class:!0});var n=T(e);t=y(n,"SPAN",{class:!0});var u=T(t);l=M(u,"Add a new todo now!"),u.forEach(_),n.forEach(_),this.h()},h(){p(t,"class","bold svelte-10nlk8i"),p(e,"class","todo svelte-10nlk8i")},m(o,n){k(o,e,n),E(e,t),E(t,l)},p:w,d(o){o&&_(e)}}}function oe(a){let e,t,l;return{c(){e=v("input"),this.h()},l(o){e=y(o,"INPUT",{placeholder:!0,class:!0}),this.h()},h(){p(e,"placeholder","Let's do Together!"),p(e,"class","svelte-10nlk8i")},m(o,n){k(o,e,n),a[11](e),O(e,a[2]),t||(l=[I(e,"input",a[12]),I(e,"blur",a[6]),I(e,"keydown",a[7])],t=!0)},p(o,n){n&4&&e.value!==o[2]&&O(e,o[2])},d(o){o&&_(e),a[11](null),t=!1,X(l)}}}function ne(a){let e,t,l,o,n,u,s;l=new te({props:{icon:a[3],color:a[4],width:ie}});function r(i,f){return i[0]?oe:le}let c=r(a),d=c(a);return{c(){e=v("div"),t=v("div"),V(l.$$.fragment),o=L(),d.c(),this.h()},l(i){e=y(i,"DIV",{class:!0});var f=T(e);t=y(f,"DIV",{class:!0});var m=T(t);q(l.$$.fragment,m),m.forEach(_),o=C(f),d.l(f),f.forEach(_),this.h()},h(){p(t,"class","svelte-10nlk8i"),p(e,"class","flex svelte-10nlk8i"),D(e,"editing",a[0])},m(i,f){k(i,e,f),E(e,t),P(l,t,null),E(e,o),d.m(e,null),n=!0,u||(s=I(e,"click",a[5]),u=!0)},p(i,[f]){const m={};f&8&&(m.icon=i[3]),f&16&&(m.color=i[4]),l.$set(m),c===(c=r(i))&&d?d.p(i,f):(d.d(1),d=c(i),d&&(d.c(),d.m(e,null))),f&1&&D(e,"editing",i[0])},i(i){n||(g(l.$$.fragment,i),n=!0)},o(i){b(l.$$.fragment,i),n=!1},d(i){i&&_(e),S(l),d.d(),u=!1,s()}}}const ie=30;let ae="";const re="todo";function ce(a,e,t){let l,o,{source:n=x()}=e,{isTeam:u=!1}=e,{callback:s=h=>{}}=e,r,c=!1,d="";const i=()=>{t(0,c=!0),setTimeout(()=>r.focus(),1)},f=()=>{if(!c||(t(0,c=!1),d==""))return;const h={contentType:"todo",id:"",title:`${d}`,caption:"",status:"todo",type:"",date:new Date,color:ae};t(2,d=""),s(h),$({source:n,isTeam:u,content:h,type:re})},m=h=>{h.key==="Enter"&&f()};function J(h){W[h?"unshift":"push"](()=>{r=h,t(1,r)})}function K(){d=this.value,t(2,d)}return a.$$set=h=>{"source"in h&&t(8,n=h.source),"isTeam"in h&&t(9,u=h.isTeam),"callback"in h&&t(10,s=h.callback)},a.$$.update=()=>{a.$$.dirty&1&&t(3,o=c?"akar-icons:circle":"gridicons:add")},t(4,l="var(--primary);"),[c,r,d,o,l,i,f,m,n,u,s,J,K]}class ue extends B{constructor(e){super(),F(this,e,ce,ne,H,{source:8,isTeam:9,callback:10})}}function U(a,e,t){const l=a.slice();return l[6]=e[t],l}function j(a){let e,t,l;return t=new ue({props:{source:a[1],isTeam:a[2],callback:a[5]}}),{c(){e=v("div"),V(t.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0});var n=T(e);q(t.$$.fragment,n),n.forEach(_),this.h()},h(){p(e,"class","add svelte-1ygri2f"),D(e,"push",a[4])},m(o,n){k(o,e,n),P(t,e,null),l=!0},p(o,n){const u={};n&2&&(u.source=o[1]),n&4&&(u.isTeam=o[2]),t.$set(u),n&16&&D(e,"push",o[4])},i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){b(t.$$.fragment,o),l=!1},d(o){o&&_(e),S(t)}}}function fe(a){let e,t=[],l=new Map,o,n=a[0];const u=s=>s[6].id;for(let s=0;s<n.length;s+=1){let r=U(a,n,s),c=u(r);l.set(c,t[s]=z(c,r))}return{c(){e=v("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=y(s,"DIV",{class:!0});var r=T(e);for(let c=0;c<t.length;c+=1)t[c].l(r);r.forEach(_),this.h()},h(){p(e,"class","svelte-1ygri2f"),D(e,"push",a[4])},m(s,r){k(s,e,r);for(let c=0;c<t.length;c+=1)t[c].m(e,null);o=!0},p(s,r){r&7&&(n=s[0],A(),t=Y(t,r,u,1,s,n,l,e,R,z,null,U),N()),r&16&&D(e,"push",s[4])},i(s){if(!o){for(let r=0;r<n.length;r+=1)g(t[r]);o=!0}},o(s){for(let r=0;r<t.length;r+=1)b(t[r]);o=!1},d(s){s&&_(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function de(a){let e,t;return{c(){e=v("p"),t=G("No todos yet!"),this.h()},l(l){e=y(l,"P",{class:!0});var o=T(e);t=M(o,"No todos yet!"),o.forEach(_),this.h()},h(){p(e,"class","svelte-1ygri2f")},m(l,o){k(l,e,o),E(e,t)},p:w,i:w,o:w,d(l){l&&_(e)}}}function _e(a){let e;return{c(){e=G(a[0])},l(t){e=M(t,a[0])},m(t,l){k(t,e,l)},p(t,l){l&1&&Z(e,t[0])},i:w,o:w,d(t){t&&_(e)}}}function z(a,e){let t,l,o,n;return l=new se({props:{todo:e[6],source:e[1],isTeam:e[2]}}),{key:a,first:null,c(){t=v("div"),V(l.$$.fragment),o=L(),this.h()},l(u){t=y(u,"DIV",{class:!0});var s=T(t);q(l.$$.fragment,s),o=C(s),s.forEach(_),this.h()},h(){p(t,"class","todo svelte-1ygri2f"),this.first=t},m(u,s){k(u,t,s),P(l,t,null),E(t,o),n=!0},p(u,s){e=u;const r={};s&1&&(r.todo=e[6]),s&2&&(r.source=e[1]),s&4&&(r.isTeam=e[2]),l.$set(r)},i(u){n||(g(l.$$.fragment,u),n=!0)},o(u){b(l.$$.fragment,u),n=!1},d(u){u&&_(t),S(l)}}}function he(a){let e,t,l,o,n,u,s=!a[3]&&j(a);const r=[_e,de,fe],c=[];function d(i,f){return f&1&&(t=null),t==null&&(t=typeof i[0]=="string"||!Array.isArray(i[0])),t?0:i[0].length==0?1:2}return l=d(a,-1),o=c[l]=r[l](a),{c(){s&&s.c(),e=L(),o.c(),n=Q()},l(i){s&&s.l(i),e=C(i),o.l(i),n=Q()},m(i,f){s&&s.m(i,f),k(i,e,f),c[l].m(i,f),k(i,n,f),u=!0},p(i,[f]){i[3]?s&&(A(),b(s,1,1,()=>{s=null}),N()):s?(s.p(i,f),f&8&&g(s,1)):(s=j(i),s.c(),g(s,1),s.m(e.parentNode,e));let m=l;l=d(i,f),l===m?c[l].p(i,f):(A(),b(c[m],1,1,()=>{c[m]=null}),N(),o=c[l],o?o.p(i,f):(o=c[l]=r[l](i),o.c()),g(o,1),o.m(n.parentNode,n))},i(i){u||(g(s),g(o),u=!0)},o(i){b(s),b(o),u=!1},d(i){s&&s.d(i),i&&_(e),c[l].d(i),i&&_(n)}}}function me(a,e,t){let{todos:l=[]}=e,{source:o}=e,{isTeam:n}=e,{locked:u=!1}=e,s=!1;const r=c=>{typeof l!="string"&&(t(0,l=[c,...l]),t(4,s=!0),setTimeout(()=>{t(4,s=!1)},1100))};return a.$$set=c=>{"todos"in c&&t(0,l=c.todos),"source"in c&&t(1,o=c.source),"isTeam"in c&&t(2,n=c.isTeam),"locked"in c&&t(3,u=c.locked)},[l,o,n,u,s,r]}class ye extends B{constructor(e){super(),F(this,e,me,he,H,{todos:0,source:1,isTeam:2,locked:3})}}const be=async({source:a,dateRange:e={start:new Date(0),end:new Date},isTeam:t=!1,amount:l=50})=>{let o,n=[];try{o=await ee({type:"todo",source:a,amount:l,isTeam:t,queries:[{type:"date",compare:">=",value:e.start},{type:"date",compare:"<",value:e.end}]})}catch(u){return u}return o.forEach(u=>{var r,c,d;const s=u.data();n.push({contentType:"todo",id:(r=s.id)!=null?r:u.id,title:(c=s.title)==null?void 0:c.trim(),caption:(d=s.caption)==null?void 0:d.trim(),color:s.color==""?"var(--primary)":`#${s.color.substring(2)+s.color.substring(0,2)}`,date:s.date.toDate(),status:s.status,type:s.type})}),n};export{ye as T,be as g};
