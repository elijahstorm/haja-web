import{S as I,i as N,s as D,d as f,a7 as O,R as q,T as A,v as E,e as _,g as w,a8 as F,k as p,t as b,l as v,F as u,_ as M,A as T,B as z,C as G,D as H,a0 as J,a1 as K,a2 as Q,x as U,y as V}from"./index-5511dae7.js";import{b as P}from"./environment-60829b93.js";import{g as k}from"./navigation-47a412a4.js";import{b as g}from"./shared-eaf57226.js";import{d as S}from"./auth-d39e8e30.js";import{s as y}from"./session-d9259449.js";import{L as $}from"./Loader-975a4d69.js";function R(c){const t={c:u,l:u,m:u,p:u,i:u,o:u,d:u};return f("SvelteRegisterBlock",{block:t,id:R.name,type:"catch",source:'(1:0) <script lang=\\"ts\\">import { browser }',ctx:c}),t}function B(c){let t,i,e,a;const o=[C,j],n=[];function l(r,s){return r[5]==null?0:1}t=l(c),i=n[t]=o[t](c);const m={c:function(){i.c(),e=_()},l:function(s){i.l(s),e=_()},m:function(s,d){n[t].m(s,d),w(s,e,d),a=!0},p:function(s,d){i.p(s,d)},i:function(s){a||(p(i),a=!0)},o:function(s){b(i),a=!1},d:function(s){n[t].d(s),s&&v(e)}};return f("SvelteRegisterBlock",{block:m,id:B.name,type:"then",source:"(25:0) {:then id}",ctx:c}),m}function j(c){let t;const i=c[3].default,e=M(i,c,c[2],null),a={c:function(){e&&e.c()},l:function(n){e&&e.l(n)},m:function(n,l){e&&e.m(n,l),t=!0},p:function(n,l){e&&e.p&&(!t||l&4)&&J(e,i,n,n[2],t?Q(i,n[2],l,null):K(n[2]),null)},i:function(n){t||(p(e,n),t=!0)},o:function(n){b(e,n),t=!1},d:function(n){e&&e.d(n)}};return f("SvelteRegisterBlock",{block:a,id:j.name,type:"else",source:"(28:1) {:else}",ctx:c}),a}function C(c){let t;const i={c:function(){t=U("Please log in")},l:function(a){t=V(a,"Please log in")},m:function(a,o){w(a,t,o)},p:u,i:u,o:u,d:function(a){a&&v(t)}};return f("SvelteRegisterBlock",{block:i,id:C.name,type:"if",source:"(26:1) {#if id == null}",ctx:c}),i}function L(c){let t,i;t=new $({props:{top:4},$$inline:!0});const e={c:function(){T(t.$$.fragment)},l:function(o){z(t.$$.fragment,o)},m:function(o,n){G(t,o,n),i=!0},p:u,i:function(o){i||(p(t.$$.fragment,o),i=!0)},o:function(o){b(t.$$.fragment,o),i=!1},d:function(o){H(t,o)}};return f("SvelteRegisterBlock",{block:e,id:L.name,type:"pending",source:"(23:13)   <Loader top={4}",ctx:c}),e}function h(c){let t,i,e={ctx:c,current:null,token:null,hasCatch:!1,pending:L,then:B,catch:R,value:5,blocks:[,,,]};O(c[0],e);const a={c:function(){t=_(),e.block.c()},l:function(n){t=_(),e.block.l(n)},m:function(n,l){w(n,t,l),e.block.m(n,e.anchor=l),e.mount=()=>t.parentNode,e.anchor=t,i=!0},p:function(n,[l]){c=n,F(e,c,l)},i:function(n){i||(p(e.block),i=!0)},o:function(n){for(let l=0;l<3;l+=1){const m=e.blocks[l];b(m)}i=!1},d:function(n){n&&v(t),e.block.d(n),e.token=null,e=null}};return f("SvelteRegisterBlock",{block:a,id:h.name,type:"component",source:"",ctx:c}),a}function W(c,t,i){let e;q(y,"session"),A(c,y,r=>i(1,e=r));let{$$slots:a={},$$scope:o}=t;E("ProtectedPage",a,["default"]);let n=S();const l=async()=>{await n,n==null&&P&&k(`${g}/login`)};l();const m=[];return Object.keys(t).forEach(r=>{!~m.indexOf(r)&&r.slice(0,2)!=="$$"&&r!=="slot"&&console.warn(`<ProtectedPage> was created with unknown prop '${r}'`)}),c.$$set=r=>{"$$scope"in r&&i(2,o=r.$$scope)},c.$capture_state=()=>({browser:P,goto:k,base:g,awaitMyId:S,session:y,Loader:$,wait:n,redirectIfNotLoggedIn:l,$session:e}),c.$inject_state=r=>{"wait"in r&&i(0,n=r.wait)},t&&"$$inject"in t&&c.$inject_state(t.$$inject),c.$$.update=()=>{c.$$.dirty&2&&e.ready&&!e.user&&k(`${g}/login`)},[n,e,o,a]}class ot extends I{constructor(t){super(t),N(this,t,W,h,D,{}),f("SvelteRegisterComponent",{component:this,tagName:"ProtectedPage",options:t,id:h.name})}}export{ot as P};
