import{S as B,i as F,s as H,k as v,v as P,a as N,l as y,m as T,w as V,h,c as S,n as p,a3 as E,b as g,G as D,x as q,L as I,f as k,t as b,y as C,K as Z,a4 as R,q as O,r as j,A as w,a5 as K,C as x,e as M,g as A,d as L,a1 as $,aa as ee,u as te}from"./index-18d30961.js";import{u as se,e as le}from"./auth-2ea31209.js";import{I as oe}from"./Icon-7347de75.js";import{s as ne}from"./session-43aaf42a.js";import{T as ie}from"./TodoContent-2de77525.js";(()=>{let i=!1;try{const e=Object.defineProperty({},"passive",{get(){return i={passive:!0},!0}});window.addEventListener("testPassive",null,e),window.removeEventListener("testPassive",null,e)}catch{}return i})();function re(i){let e,t,l;return{c(){e=v("div"),t=v("span"),l=O("Add a new todo now!"),this.h()},l(o){e=y(o,"DIV",{class:!0});var r=T(e);t=y(r,"SPAN",{class:!0});var a=T(t);l=j(a,"Add a new todo now!"),a.forEach(h),r.forEach(h),this.h()},h(){p(t,"class","bold svelte-10nlk8i"),p(e,"class","todo svelte-10nlk8i")},m(o,r){g(o,e,r),D(e,t),D(t,l)},p:w,d(o){o&&h(e)}}}function ae(i){let e,t,l;return{c(){e=v("input"),this.h()},l(o){e=y(o,"INPUT",{placeholder:!0,class:!0}),this.h()},h(){p(e,"placeholder","Let's do Together!"),p(e,"class","svelte-10nlk8i")},m(o,r){g(o,e,r),i[12](e),K(e,i[2]),t||(l=[I(e,"input",i[13]),I(e,"blur",i[6]),I(e,"keydown",i[7])],t=!0)},p(o,r){r&4&&e.value!==o[2]&&K(e,o[2])},d(o){o&&h(e),i[12](null),t=!1,x(l)}}}function ce(i){let e,t,l,o,r,a,s;l=new oe({props:{icon:i[3],color:i[4],width:ue}});function c(n,f){return n[0]?ae:re}let u=c(i),d=u(i);return{c(){e=v("div"),t=v("div"),P(l.$$.fragment),o=N(),d.c(),this.h()},l(n){e=y(n,"DIV",{class:!0});var f=T(e);t=y(f,"DIV",{class:!0});var m=T(t);V(l.$$.fragment,m),m.forEach(h),o=S(f),d.l(f),f.forEach(h),this.h()},h(){p(t,"class","svelte-10nlk8i"),p(e,"class","flex svelte-10nlk8i"),E(e,"editing",i[0])},m(n,f){g(n,e,f),D(e,t),q(l,t,null),D(e,o),d.m(e,null),r=!0,a||(s=I(e,"click",i[5]),a=!0)},p(n,[f]){const m={};f&8&&(m.icon=n[3]),f&16&&(m.color=n[4]),l.$set(m),u===(u=c(n))&&d?d.p(n,f):(d.d(1),d=u(n),d&&(d.c(),d.m(e,null))),(!r||f&1)&&E(e,"editing",n[0])},i(n){r||(k(l.$$.fragment,n),r=!0)},o(n){b(l.$$.fragment,n),r=!1},d(n){n&&h(e),C(l),d.d(),a=!1,s()}}}const ue=30;let fe="";const de="todo";function _e(i,e,t){let l,o,r,a;Z(i,ne,_=>t(11,a=_));let{source:s=l}=e,{isTeam:c=!1}=e,{callback:u=_=>{}}=e,d,n=!1,f="";const m=()=>{t(0,n=!0),setTimeout(()=>d.focus(),1)},G=()=>{if(!n||(t(0,n=!1),f==""))return;const _={contentType:"todo",id:"",title:`${f}`,caption:"",status:"todo",type:"",date:new Date,color:fe};t(2,f=""),u(_),se({source:s,isTeam:c,content:_,type:de}).then(Y=>{_.id=Y.id})},J=_=>{_.key==="Enter"&&G()};function W(_){R[_?"unshift":"push"](()=>{d=_,t(1,d)})}function X(){f=this.value,t(2,f)}return i.$$set=_=>{"source"in _&&t(8,s=_.source),"isTeam"in _&&t(9,c=_.isTeam),"callback"in _&&t(10,u=_.callback)},i.$$.update=()=>{var _;i.$$.dirty&2048&&(l=(_=a==null?void 0:a.user)==null?void 0:_.uid),i.$$.dirty&1&&t(3,r=n?"akar-icons:circle":"gridicons:add")},t(4,o="var(--primary);"),[n,d,f,r,o,m,G,J,s,c,u,a,W,X]}class he extends B{constructor(e){super(),F(this,e,_e,ce,H,{source:8,isTeam:9,callback:10})}}function Q(i,e,t){const l=i.slice();return l[10]=e[t],l}function U(i){let e,t,l;return t=new he({props:{source:i[1],isTeam:i[2],callback:i[5]}}),{c(){e=v("div"),P(t.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0});var r=T(e);V(t.$$.fragment,r),r.forEach(h),this.h()},h(){p(e,"class","add svelte-1ygri2f"),E(e,"push",i[4])},m(o,r){g(o,e,r),q(t,e,null),l=!0},p(o,r){const a={};r&2&&(a.source=o[1]),r&4&&(a.isTeam=o[2]),t.$set(a),(!l||r&16)&&E(e,"push",o[4])},i(o){l||(k(t.$$.fragment,o),l=!0)},o(o){b(t.$$.fragment,o),l=!1},d(o){o&&h(e),C(t)}}}function me(i){let e,t=[],l=new Map,o,r=i[0];const a=s=>s[10].id;for(let s=0;s<r.length;s+=1){let c=Q(i,r,s),u=a(c);l.set(u,t[s]=z(u,c))}return{c(){e=v("div");for(let s=0;s<t.length;s+=1)t[s].c();this.h()},l(s){e=y(s,"DIV",{class:!0});var c=T(e);for(let u=0;u<t.length;u+=1)t[u].l(c);c.forEach(h),this.h()},h(){p(e,"class","svelte-1ygri2f"),E(e,"push",i[4])},m(s,c){g(s,e,c);for(let u=0;u<t.length;u+=1)t[u].m(e,null);o=!0},p(s,c){c&7&&(r=s[0],A(),t=$(t,c,a,1,s,r,l,e,ee,z,null,Q),L()),(!o||c&16)&&E(e,"push",s[4])},i(s){if(!o){for(let c=0;c<r.length;c+=1)k(t[c]);o=!0}},o(s){for(let c=0;c<t.length;c+=1)b(t[c]);o=!1},d(s){s&&h(e);for(let c=0;c<t.length;c+=1)t[c].d()}}}function pe(i){let e,t;return{c(){e=v("p"),t=O("No todos yet!"),this.h()},l(l){e=y(l,"P",{class:!0});var o=T(e);t=j(o,"No todos yet!"),o.forEach(h),this.h()},h(){p(e,"class","svelte-1ygri2f")},m(l,o){g(l,e,o),D(e,t)},p:w,i:w,o:w,d(l){l&&h(e)}}}function ge(i){let e;return{c(){e=O(i[0])},l(t){e=j(t,i[0])},m(t,l){g(t,e,l)},p(t,l){l&1&&te(e,t[0])},i:w,o:w,d(t){t&&h(e)}}}function z(i,e){let t,l,o,r;return l=new ie({props:{todo:e[10],source:e[1],isTeam:e[2]}}),{key:i,first:null,c(){t=v("div"),P(l.$$.fragment),o=N(),this.h()},l(a){t=y(a,"DIV",{class:!0});var s=T(t);V(l.$$.fragment,s),o=S(s),s.forEach(h),this.h()},h(){p(t,"class","todo svelte-1ygri2f"),this.first=t},m(a,s){g(a,t,s),q(l,t,null),D(t,o),r=!0},p(a,s){e=a;const c={};s&1&&(c.todo=e[10]),s&2&&(c.source=e[1]),s&4&&(c.isTeam=e[2]),l.$set(c)},i(a){r||(k(l.$$.fragment,a),r=!0)},o(a){b(l.$$.fragment,a),r=!1},d(a){a&&h(t),C(l)}}}function ke(i){let e,t,l,o,r,a,s=!i[3]&&U(i);const c=[ge,pe,me],u=[];function d(n,f){return f&1&&(t=null),t==null&&(t=typeof n[0]=="string"||!Array.isArray(n[0])),t?0:n[0].length==0?1:2}return l=d(i,-1),o=u[l]=c[l](i),{c(){s&&s.c(),e=N(),o.c(),r=M()},l(n){s&&s.l(n),e=S(n),o.l(n),r=M()},m(n,f){s&&s.m(n,f),g(n,e,f),u[l].m(n,f),g(n,r,f),a=!0},p(n,[f]){n[3]?s&&(A(),b(s,1,1,()=>{s=null}),L()):s?(s.p(n,f),f&8&&k(s,1)):(s=U(n),s.c(),k(s,1),s.m(e.parentNode,e));let m=l;l=d(n,f),l===m?u[l].p(n,f):(A(),b(u[m],1,1,()=>{u[m]=null}),L(),o=u[l],o?o.p(n,f):(o=u[l]=c[l](n),o.c()),k(o,1),o.m(r.parentNode,r))},i(n){a||(k(s),k(o),a=!0)},o(n){b(s),b(o),a=!1},d(n){s&&s.d(n),n&&h(e),u[l].d(n),n&&h(r)}}}function ve(i,e,t){let{todos:l=[]}=e,{source:o}=e,{isTeam:r}=e,{locked:a=!1}=e,s=!1;const c=u=>{typeof l!="string"&&(t(0,l=[u,...l]),t(4,s=!0),setTimeout(()=>{t(4,s=!1)},1100))};return i.$$set=u=>{"todos"in u&&t(0,l=u.todos),"source"in u&&t(1,o=u.source),"isTeam"in u&&t(2,r=u.isTeam),"locked"in u&&t(3,a=u.locked)},[l,o,r,a,s,c]}class De extends B{constructor(e){super(),F(this,e,ve,ke,H,{todos:0,source:1,isTeam:2,locked:3})}}const Ie=async({source:i,dateRange:e={start:new Date(0),end:new Date},isTeam:t=!1,amount:l=50})=>{let o,r=[];try{o=await le({type:"todo",source:i,amount:l,isTeam:t,queries:[{type:"date",compare:">=",value:e.start},{type:"date",compare:"<",value:e.end}]})}catch(a){return a}return o.forEach(a=>{var c,u,d;const s=a.data();r.push({contentType:"todo",id:(c=s.id)!=null?c:a.id,title:(u=s.title)==null?void 0:u.trim(),caption:(d=s.caption)==null?void 0:d.trim(),color:s.color==""?"var(--primary)":`#${s.color.substring(2)+s.color.substring(0,2)}`,date:s.date.toDate(),status:s.status,type:s.type})}),r};export{De as T,Ie as g};
